<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Siar Kota OS</title>
    <script src="qwebchannel.js"></script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background: linear-gradient(135deg, #1e1e2f 0%, #0a0a12 100%); color: white; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }
        header { height: 60px; background: rgba(255, 255, 255, 0.05); border-bottom: 1px solid rgba(255, 255, 255, 0.1); display: flex; align-items: center; justify-content: space-between; padding: 0 30px; }
        .logo { font-weight: bold; letter-spacing: 2px; }
        .tombol-off { background: #ff4444; color: white; padding: 5px 15px; border-radius: 20px; font-weight: bold; cursor: pointer; }
        .tombol-off:hover { background: #ff0000; }
        
        main { flex: 1; display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; padding: 40px; align-content: center; }
        .card { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 15px; height: 180px; display: flex; flex-direction: column; justify-content: center; align-items: center; transition: 0.3s; cursor: pointer; }
        .card:hover { background: rgba(255, 255, 255, 0.15); transform: translateY(-5px); border-color: #00ff88; }
        .icon { font-size: 3rem; margin-bottom: 10px; }
    </style>
</head>
<body>

    <header>
        <div class="logo">SIAR KOTA</div>
        <div id="waktu">00:00</div>
        <div class="tombol-off" onclick="kirimPerintah('tutup_aplikasi')">OFF</div>
    </header>

    <main>
        <div class="card" onclick="kirimPerintah('layanan')"><div class="icon">ğŸ›ï¸</div><h2>Layanan</h2></div>
        <div class="card" onclick="kirimPerintah('data')"><div class="icon">ğŸ“Š</div><h2>Data</h2></div>
        <div class="card" onclick="kirimPerintah('darurat')"><div class="icon">ğŸš‘</div><h2>Darurat</h2></div>
        <div class="card" onclick="kirimPerintah('peta')"><div class="icon">ğŸ—ºï¸</div><h2>Peta</h2></div>
        <div class="card" onclick="kirimPerintah('berita')"><div class="icon">ğŸ“°</div><h2>Berita</h2></div>
        <div class="card" onclick="kirimPerintah('pengaturan')"><div class="icon">âš™ï¸</div><h2>Pengaturan</h2></div>
    </main>

    <script>
        // 1. Jam
        setInterval(() => { document.getElementById('waktu').innerText = new Date().toLocaleTimeString(); }, 1000);

        // 2. LOGIKA JEMBATAN (PENTING!)
        var backend;
        document.addEventListener("DOMContentLoaded", function () {
            new QWebChannel(qt.webChannelTransport, function (channel) {
                backend = channel.objects.jembatan_sistem;
            });
        });

        function kirimPerintah(pesan) {
            if (backend) backend.terima_perintah(pesan);
        }
    </script>
</body>
</html>